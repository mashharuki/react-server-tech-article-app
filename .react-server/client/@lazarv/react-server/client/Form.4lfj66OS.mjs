import{j as E}from"../../../react/jsx-runtime.Bzy84PhA.mjs";import{r as o}from"../../../react.h85BbI97.mjs";import{useClient as F,FlightContext as k}from"./context.C11qnkA2.mjs";function T({target:s,root:i,local:c,transition:u,push:f,replace:e,rollback:l=!1,noCache:m,revalidate:x,onNavigate:v,onError:w,onSubmit:p,children:y,...C}){const{navigate:R}=F(),{outlet:a}=o.useContext(k),n=o.useRef(null),r=o.useCallback(async()=>{try{const t=new URL(n.current.action,window.location.origin),g=new FormData(n.current);for(const[j,D]of g.entries())t.searchParams.set(j,D);const h=t.toString();await R(h,{outlet:s||(c?a:i?"PAGE_ROOT":void 0),push:(e?!1:f)??(s&&s===a),replace:e,rollback:l,noCache:m,revalidate:x}),v?.()}catch(t){w?.(t)}},[n,s,a,i,c,f,e,l,m,x]),d=o.useCallback(async t=>{t.preventDefault(),p?.(t),u!==!1?o.startTransition(r):r()},[u,p,r]);return E.jsx("form",{...C,ref:n,onSubmit:d,children:y})}export{T as default};
