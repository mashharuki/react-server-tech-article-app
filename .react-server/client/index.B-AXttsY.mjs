import{j as d}from"./react/jsx-runtime.Bzy84PhA.mjs";import{r as k}from"./react.h85BbI97.mjs";import{c as K}from"./react-dom/client.Ddh9F7XT.mjs";import{c as A}from"./react-server-dom-webpack/client.browser.D6-iLJJX.mjs";import{ClientContext as q,PAGE_ROOT as I}from"./@lazarv/react-server/client/context.C11qnkA2.mjs";import B from"./@lazarv/react-server/client/ReactServerComponent.DNqt4_Id.mjs";import"./react-dom.BQ44fJeE.mjs";const c=I,z=q,b=new Map,i=new Map,x=new Map,h=new Map,u=new Map,C=new Map,s=new Map,G=(t,e)=>(h.set(t,e),()=>h.delete(t)),W=(t,e)=>{x.has(t)||x.set(t,new Set);const r=x.get(t);return r.add(e),()=>r.delete(e)},w=(t,e=t,r={},n=()=>{})=>{if(!x.has(t))return n();const a=x.get(t);for(const l of a)l(e,r,n)},E=(t,e)=>typeof t<"u"&&t!==null&&t!==!0?typeof t=="function"?t(e):typeof t=="number"&&e.timestamp?Date.now()-e.timestamp>t:t:!0,F=(t,{outlet:e=c,revalidate:r,ttl:n=1/0})=>{if(C.get(e)!==t){i.delete(e),i.delete(t),C.set(e,t);const a=`${e}:${t}`;s.has(a)?i.set(e,s.get(a)):(!s.has(a)||s.has(a)&&E(r,{outlet:e,url:t,timestamp:s.get(`${a}:timestamp`)}))&&(L(t,{revalidate:r,outlet:e,onError:()=>s.delete(a),prefetch:!0,fromCache:!0}),s.set(a,i.get(e)),s.set(`${a}:timestamp`,Date.now()),typeof n=="number"&&n<1/0&&setTimeout(()=>{s.has(a)&&s.delete(a)},n))}},N=(t,e={})=>{if(h.size>1){const r=new Set(h.keys());return r.delete(c),Promise.all(Array.from(r).map(n=>F(t,{...e,outlet:e.outlet||n})))}return F(t,e)},J=async(t=c,e={})=>new Promise((r,n)=>{const a=t===c?c:h.get(t)||c;C.get(t)===a?C.delete(t):(i.delete(a),i.delete(t)),w(t,a,e,l=>{l?n(l):(b.set(t,i.get(t)),r())})});let $=new URL(location);const O=(t,{outlet:e=c,push:r,rollback:n=0,revalidate:a,noCache:l,...y})=>new Promise((m,g)=>{if(typeof n=="number"&&n>0){const o=`${e}:${h.get(e)||location.href}`;if(!s.has(o)){const _=`${o}:timeout`;s.has(_)&&(clearTimeout(s.get(_)),s.delete(_)),s.set(o,b.get(e)),s.set(_,setTimeout(()=>{s.has(o)&&s.delete(o)},n))}}h.set(e,t),e===c&&(r!==!1?history.pushState(Object.fromEntries(h.entries()),"",t):history.replaceState(Object.fromEntries(h.entries()),"",t),$=new URL(location));const f=`${e}:${t}`;if(s.has(f)){i.set(e,s.get(f)),E(a,{outlet:e,url:t,timestamp:s.get(`${f}:timestamp`)})&&s.delete(f);const o=`${f}:timeout`;s.has(o)&&(clearTimeout(s.get(o)),s.delete(o))}else i.delete(t),i.delete(e);w(e,t,{...y,noCache:l,fromCache:!0},o=>{o?g(o):(b.set(e,i.get(e)),E(a,{outlet:e,url:t})||(s.set(`${e}:${t}`,i.get(e)),s.set(`${e}:${t}:timestamp`,Date.now())),m())})}),H=(t,e={})=>{if(!(e.outlet===c)&&h.size>1){const n=new Set(h.keys());return n.delete(c),(e.push||e.replace)&&(e.push!==!1?history.pushState(Object.fromEntries(h.entries()),"",t):history.replaceState(Object.fromEntries(h.entries()),"",t),$=new URL(location)),e.outlet?O(t,{...e,outlet:e.outlet}):Promise.all(Array.from(n).map(a=>O(t,{...e,outlet:e.outlet||a})))}return O(t,e)},Q=(t,e)=>H(t,{...e,push:!1}),V=(t,e={})=>new Promise((r,n)=>{const a=e.url??(h.get(t)||c);if(i.delete(a),i.delete(t),e.noEmit)return r();w(t,a,{...e,outlet:t,noCache:!0},l=>{l?n(l):(b.set(t,i.get(t)),r())})});window.addEventListener("popstate",()=>{const t=new URL(location);if($.pathname===t.pathname&&$.search===t.search&&($.hash!==t.hash||$.hash===t.hash))return;$=t;const e=`${c}:${location.href}`;if(s.has(e)){i.set(c,s.get(e)),s.delete(e);const r=`${e}:timeout`;s.has(r)&&(clearTimeout(s.get(r)),s.delete(r)),h.set(c,location.href),w(c,location.href,{fromCache:!0},n=>{n||b.set(c,i.get(c))})}else{const r=new Set(h.keys());r.has(c)&&r.size>1&&r.delete(c);for(const n of r){const a=`${n}:${location.href}`;if(s.has(a)){i.set(n,s.get(a)),s.delete(a);const l=`${a}:timeout`;s.has(l)&&(clearTimeout(s.get(l)),s.delete(l))}else i.delete(n),i.delete(location.href);h.set(n,location.href),w(n,location.href,{fromCache:!0},l=>{l||b.set(n,i.get(n))})}}});const P=(t,e,r)=>({async callServer(n,a){return new Promise(async(l,y)=>{try{const m=await A.encodeReply(a),g=t||c;let f=t;i.delete(g),i.delete(f),L(h.get(f)||g,{method:"POST",body:m,outlet:f,remote:e,defer:r,callServer:n||!0,onFetch:o=>{const _=typeof o.headers.get("React-Server-Data")=="string"?n||!0:!1;w(f,g,{callServer:_},async(R,M)=>{if(R)y(R);else{if(!_){const S=o.headers.get("React-Server-Render"),p=o.headers.get("React-Server-Outlet");return S&&p&&(i.set(p,await M),w(p,S,{})),l()}const D=await M;try{const S=await D.at(-1);l(S);const p=o.headers.get("React-Server-Render"),v=o.headers.get("React-Server-Outlet");p&&v&&(i.set(v,D.slice(0,-1)),w(v,p,{}))}catch(S){y(S)}}})},onError:o=>{y(o)},headers:{"React-Server-Action":encodeURIComponent(n)}})}catch(m){y(m)}})}}),U=(t=c,e,r)=>{if(u.has(t)||r!==!1&&u.has(`prefetch:${t}`)){const n=u.get(t),a=u.get(`prefetch:${t}`);for(const l of[...n||[],...r!==!1?a||[]:[]])l?.signal.aborted||l.abort(e);u.delete(t),u.delete(`prefetch:${t}`),r!==!1&&C.delete(t)}};function L(t,e={}){let r=e.signal;if(!i.has(e.outlet||t)||e.noCache){if(!e.defer&&self[`__flightStream__${e.outlet||c}__`]&&!self[`__flightHydration__${e.outlet||c}__`]){const n=self[`__flightStream__${e.outlet||c}__`].readable,[a,l]=n.tee();self[`__flightStream__${e.outlet||c}__`]={readable:l},i.set(e.outlet||t,A.createFromReadableStream(a,P(e.outlet||t,e.remote))),self[`__flightHydration__${e.outlet||c}__`]=!0,b.set(e.outlet||t,i.get(e.outlet||t))}else if(!e.fromScript){const n=new URL(t===c?location.href:e.url??t,location),a=e.outlet&&e.outlet!==c?`@${e.outlet}.`:"";n.pathname=`${n.pathname}/${a}rsc.x-component`.replace(/\/+/g,"/");const l=n.toString();if(!e.callServer){U(e.outlet||t,new DOMException("navigation","AbortError"),!e.prefetch),r||(r=new AbortController),e.onAbort&&r.signal.addEventListener("abort",e.onAbort),e.prefetch&&E(e.revalidate,{outlet:e.outlet||c,url:t,timestamp:s.get(`${e.outlet||c}:${t}:timestamp`)})&&r.signal.addEventListener("abort",()=>{s.delete(`${e.outlet||c}:${t}`)});const m=`${e.prefetch?"prefetch:":""}${e.outlet||t}`;u.has(m)||u.set(m,new Set),u.get(m).add(r)}const y=A.createFromReadableStream(new ReadableStream({type:"bytes",async start(m){let g;try{g=await fetch(l,{...e.request,method:e.method,body:e.body,headers:{...e.request?.headers,accept:"text/x-component",...e.noCache&&{"Cache-Control":"no-cache"},...e.prefetch&&{"React-Server-Prefetch":"true"},...e.headers},credentials:"include",signal:r?.signal});const{body:f}=g;if(window.dispatchEvent(new CustomEvent(`__react_server_flight_error_${e.outlet}__`,{detail:{error:null,options:e,url:t}})),e.onFetch?.(g),r?.signal.aborted){m.error(r.signal.reason);return}for await(const o of f)m.enqueue(o);if(m.close(),u.has(e.outlet||t)){const o=u.get(e.outlet||t);o.has(r)&&o.delete(r)}}catch(f){if(f instanceof DOMException&&f.name==="AbortError"){i.delete(e.outlet||t),s.delete(`${e.outlet||c}:${t}`);return}return e.onError?.(f),new Promise(async o=>{f.digest=f.message,f.environmentName="react-server",window.dispatchEvent(new CustomEvent(`__react_server_flight_error_${e.outlet}__`,{detail:{error:f,options:e,url:t}}));const _=new TextEncoder;await new Promise(R=>setTimeout(R,0)),m.enqueue(_.encode(`0:["$L1"]
1:null
`)),m.close(),o()})}}}),P(e.outlet||t,e.remote,e.defer));i.set(e.outlet||t,y)}}return typeof e.onReady=="function"&&!r?.signal.aborted?e.onReady(i.get(e.outlet||t)):i.get(e.outlet||t)}function X({children:t}){return d.jsx(z.Provider,{value:{registerOutlet:G,refresh:J,prefetch:N,navigate:H,replace:Q,subscribe:W,invalidate:V,abort:U,getFlightResponse:L,state:{activeChunk:b,cache:i,flightCache:s,listeners:x,outlets:h,outletAbortControllers:u,prefetching:C}},children:t})}self.__react_server_callServer__=P(c).callServer;const j={didCatch:!1,error:null};function T(t,e,r=new Set){return t===e?!0:r.has(e)?!1:(r.add(e),Array.isArray(e)?e.some(n=>T(t,n,r)):typeof e=="object"&&e!==null?Object.values(e).some(n=>T(t,n,r)):!1)}class Y extends k.Component{static contextType=z;constructor(e){super(e),this.state={...j}}static getDerivedStateFromError(e){return{didCatch:!0,error:e,info:null}}componentDidCatch(e,r){for(const[n,a]of this.context.state.cache.entries())if(T(e,a)){this.setState({didCatch:!0,error:e,info:r,outlet:n,url:this.context.state.outlets.get(n)||c});break}}resetErrorBoundary=async()=>{const{error:e,outlet:r,url:n}=this.state;typeof e?.digest=="string"?(r!==c&&(self[`__flightHydration__${c}__`]=!1),this.context.invalidate(r,{noEmit:!0}),this.context.getFlightResponse(r,{outlet:r,remote:r!==c&&self[`__flightStream__${r}__`],url:n,onFetch:()=>{this.setState(j)}})):this.setState(j)};render(){const{didCatch:e,error:r}=this.state;return e?d.jsxs("html",{lang:"en",suppressHydrationWarning:!0,children:[d.jsxs("head",{children:[d.jsx("title",{children:document.title}),d.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),d.jsx("meta",{charSet:"utf-8"}),d.jsx("style",{dangerouslySetInnerHTML:{__html:`
              * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
              }

              body {
                font-family: system-ui, -apple-system, sans-serif;
                padding: 2rem;
                line-height: 1.5;
                background: #fff;
              }

              h1 {
                font-size: 2rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: #e11d48;
              }

              pre {
                margin: 1rem 0;
                padding: 1rem;
                background: #f1f5f9;
                color: #374151;
                border-radius: 0.5rem;
                font-size: 0.875rem;
              }

              button {
                padding: 0.5rem 1rem;
                background: #0ea5e9;
                color: #fff;
                border: none;
                border-radius: 0.25rem;
                cursor: pointer;
              }

              button:hover {
                background: #0284c7;
              }
            `}})]}),d.jsxs("body",{suppressHydrationWarning:!0,children:[d.jsx("h1",{children:r.digest||"Error"}),d.jsx("pre",{style:{width:"100%",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:r.message}),d.jsx("button",{onClick:this.resetErrorBoundary,children:"Retry"})]})]}):this.props.children}}function Z(){return d.jsx(X,{children:d.jsx(Y,{children:d.jsx(B,{outlet:c,url:location.href})})})}k.startTransition(()=>{K.hydrateRoot(self.__react_server_hydration_container__?.()??document,d.jsx(k.StrictMode,{children:d.jsx(Z,{})}))});
