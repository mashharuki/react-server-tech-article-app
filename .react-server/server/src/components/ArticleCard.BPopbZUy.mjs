import{jsx as y,jsxs as G}from"react/jsx-runtime";import{useContext as M,useRef as L,useCallback as F,startTransition as T,useState as z,useEffect as j}from"react";import{u as E,F as D,P as I,a as $}from"../../@lazarv/react-server.Cvk6HU20.mjs";function W({target:r,root:e,local:c,transition:s,push:l,replace:t,rollback:v=!1,noCache:p,revalidate:o,onNavigate:n,onError:A,onSubmit:x,children:h,...g}){const{navigate:w}=E(),{outlet:d}=M(D),m=L(null),O=F(async()=>{try{const u=new URL(m.current.action,window.location.origin),N=new FormData(m.current);for(const[f,R]of N.entries())u.searchParams.set(f,R);const b=u.toString();await w(b,{outlet:r||(c?d:e?"PAGE_ROOT":void 0),push:(t?!1:l)??(r&&r===d),replace:t,rollback:v,noCache:p,revalidate:o}),n?.()}catch(u){A?.(u)}},[m,r,d,e,c,l,t,v,p,o]),a=F(async u=>{u.preventDefault(),x?.(u),s!==!1?T(O):O()},[s,x,O]);return y("form",{...g,ref:m,onSubmit:a,children:h})}function B({to:r,target:e,root:c,local:s,transition:l,push:t,replace:v,prefetch:p,ttl:o=1/0,revalidate:n,rollback:A=!1,noCache:x,fallback:h,Component:g,onNavigate:w,onError:d,onClick:m,onFocus:O,onMouseOver:a,onTouchStart:u,children:N,...b}){const{prefetch:f,navigate:R}=E(),{outlet:C}=M(D),P=F(async()=>{try{await R(r,{outlet:e||(s?C:c?"PAGE_ROOT":void 0),push:(v?!1:t)??(e&&e===C||!e&&C==="PAGE_ROOT"),replace:v,rollback:A,revalidate:n,noCache:x,fallback:h,Component:g}),w?.()}catch(i){d?.(i)}},[r,e,s,C,c,t,v,A,x,n,h,g,w,d]),_=F(async i=>{i.preventDefault(),m?.(i),l!==!1&&!h?T(P):P()},[l,h,m,P]),S=i=>()=>{i?.(),p===!0&&f(r,{outlet:e||(s?C:c?"PAGE_ROOT":void 0),ttl:o,noCache:x,revalidate:n})};return y("a",{...b,href:r,onClick:_,onFocus:S(O),onMouseOver:S(a),onTouchStart:S(u),children:N})}function H({remote:r=!1,defer:e=!1,request:c,children:s}){const{url:l,outlet:t}=M(D),v=E(),{registerOutlet:p,subscribe:o,getFlightResponse:n,abort:A}=v,[{resourceKey:x,error:h,Component:g},w]=z({resourceKey:0,error:null,Component:s||(t===I||r?n?.(l,{outlet:t,remote:r,defer:e,request:c}):null)}),d=L(null),m=L(null),O=L(g);if(j(()=>{let a=!0;const u=p(t,l),N=o(t||l,async(b,f,R)=>{if(typeof f.Component<"u"){const i=new DOMException("render","AbortError");A(t,i),m.current?.reject(i),w(K=>({...K,resourceKey:K.resourceKey+1,error:d.current,Component:f.Component})),R(null,f.Component);return}let C,P;const _=new Promise((i,K)=>{C=i,P=K,m.current={resolve:i,reject:K}}),S=n(b,{...f,outlet:t,remote:r,request:c,onReady:f.callServer?void 0:C,onAbort:f.callServer?void 0:P});if(f.callServer)R(null,S);else if(a){f.fallback&&T(()=>{w(i=>({...i,resourceKey:i.resourceKey+1,error:d.current,Component:f.fallback}))});try{const i=await _;m.current=null,T(()=>{w(K=>({...K,resourceKey:K.resourceKey+1,error:d.current,Component:i})),R(null,i)})}catch{m.current=null}}});return()=>{a=!1,u(),N()}},[l,t,r,c,o,n]),j(()=>{(s||t!==I&&g)&&w(a=>({...a,resourceKey:a.resourceKey+1,error:d.current,Component:s}))},[s]),j(()=>{(r||e)&&n(l,{outlet:t,remote:r,defer:e,request:c,fromScript:!e,onReady:a=>{a&&T(()=>w(u=>({...u,resourceKey:u.resourceKey+1,error:d.current,Component:a})))}})},[l,t,r,e,c,n]),j(()=>{const a=new AbortController;return window.addEventListener(`__react_server_flight_error_${t}__`,u=>{d.current=u.detail.error},{signal:a.signal}),()=>a.abort()},[t]),h){if(t===I)return y($.Provider,{value:{resourceKey:x,error:h},children:O.current});throw h}return O.current=g,y($.Provider,{value:{resourceKey:x,error:h},children:g})}function X({url:r,outlet:e=null,remote:c,defer:s,request:l,children:t}){const{navigate:v,abort:p}=E();return y(D.Provider,{value:{url:r,outlet:e,refresh(o={}){return refresh(e,o)},prefetch(o,n={}){return prefetch(o,{outlet:e,...n})},navigate(o,n={}){return v(o,{outlet:e,...n})},replace(o,n={}){return replace(o,{outlet:e,...n})},abort(o){return p(e,o)}},children:y(H,{remote:c,defer:s,request:l,children:t})})}function Y({url:r,target:e,local:c,root:s,transition:l,prefetch:t,ttl:v=1/0,revalidate:p,noCache:o,fallback:n,Component:A,onRefresh:x,onError:h,onClick:g,onFocus:w,onMouseOver:d,onTouchStart:m,children:O,...a}){const{refresh:u,prefetch:N}=E(),{url:b,outlet:f}=M(D),R=F(async()=>{try{await u(e||r||(c?f||b:s?"PAGE_ROOT":void 0),{noCache:o,fallback:n,Component:A,revalidate:p}),x?.()}catch(_){h?.(_)}},[u,e,c,s,r,f,b,p,o,n,A,x,h]),C=F(async _=>{_.preventDefault(),g?.(_),l!==!1&&!n?T(R):R()},[l,n,g,R]),P=_=>()=>{_?.(),t===!0&&N(r||b,{outlet:e||(c?f:s?"PAGE_ROOT":void 0),ttl:v,noCache:o,revalidate:p})};return y("a",{...a,href:r,onClick:C,onFocus:P(w),onMouseOver:P(d),onTouchStart:P(m),children:O})}const U=(r,e)=>r.length<=e?r:r.slice(0,e)+"...";function Z(r){const{article:e}=r,c=U(e.title,45),s=U(e.description,100);return y(B,{to:`/articles/${e.id}`,children:G("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition duration-300 cursor-pointer w-full h-[280px]",children:[y("div",{className:"h-2 bg-teal-600"}),G("div",{className:"p-6 h-[calc(280px-8px)] flex flex-col",children:[y("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:c}),y("p",{className:"text-gray-600 mb-4 line-clamp-3 flex-grow",children:s}),G("div",{className:"flex items-center mt-auto",children:[y("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-medium mr-3",children:e.author.charAt(0)}),G("div",{children:[y("div",{className:"font-medium text-gray-900",children:e.author}),y("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]})]})]})]})})}export{Z as A,W as F,B as L,X as R,Y as a,U as t};
